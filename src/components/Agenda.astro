---
import { filterPastEvents } from "../functions/filterPastEvents";

// TODO: create interface for agenda

const { agenda } = Astro.props;
---

<div>
  <h2>Agenda</h2>
  <div class="Agenda">
    {
      agenda
        .filter(filterPastEvents)
        .sort((a: any, b: any) => {
          return new Date(a.date).valueOf() - new Date(b.date).valueOf();
        })
        .map((event: any) => {
          return (
            <div class="Agenda-item">
              <time class="Agenda-date" datetime={event.date}>
                {new Date(event.date).toLocaleDateString("nl-NL", {
                  weekday: "short",
                  day: "numeric",
                  month: "short",
                })}
              </time>
              <div class="Agenda-location">
                <span class="Agenda-brandName">{event.brand_name}</span>
                <span class="Agenda-subtitle">{event.location}</span>
              </div>
              <a href={event.ticket_url} class="Agenda-callToAction">
                {event.label}
              </a>
            </div>
          );
        })
    }
  </div>
</div>
<style>
  .Agenda-item {
    display: grid;
    grid-template-columns: 1.618fr 3fr 1fr;
    gap: 1rem;
    /* --border-color: rgb(226, 232, 240);
    border-block-end: 0.5px solid var(--border-color); */
    padding-block: 1rem;
    font-size: 1rem;
    position: relative;
  }

  .Agenda-item:after {
    /* border-block-end: none; */
    content: "";
    position: absolute;
    bottom: 0px;
    width: 100%;
    height: 0.5px;
    background-color: currentcolor;
    opacity: 0.3;
  }

  .Agenda-location {
    display: flex;
    flex-direction: column;
  }

  .Agenda-callToAction {
    color: var(--text-color);
    text-align: right;
    text-decoration: none;
    transition: opacity 0.2s;

    &:hover {
      opacity: 1;
    }
  }

  .Agenda-date,
  .Agenda-callToAction,
  .Agenda-subtitle {
    opacity: 0.6;
  }

  .Agenda-date {
    color: var(--text-color-muted);
    text-transform: capitalize;
  }

  .Agenda-brandName,
  .Agenda-date {
    font-size: 1.5rem;
  }
</style>
